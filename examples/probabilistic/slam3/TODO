Implement variable-size bitmasks for slam/csp
